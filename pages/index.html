<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>COBOLT</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <h1>COBOLT</h1>
        <p>Your platform, your game updates</p>
    </header>
    <main>
        <h2>Latest Games</h2>
        <ul class="game-list" id="gameList">
            <!-- Games will be loaded here -->
        </ul>
        <h2>Submit Your Game</h2>
        <form id="gameForm">
            <input type="text" id="title" placeholder="Game Title" required>
            <textarea id="desc" placeholder="Short Description" required></textarea>
            <input type="url" id="url" placeholder="Game URL (e.g., itch.io, AWS S3, etc.)" required>
            <button type="submit">Submit</button>
        </form>
    </main>
    <script>
        // Replace with your AWS API Gateway endpoint
        const API_URL = 'https://your-api-id.execute-api.region.amazonaws.com/prod/games';

        // Load games from AWS
        async function loadGames() {
            const res = await fetch(API_URL);
            const games = await res.json();
            const list = document.getElementById('gameList');
            list.innerHTML = '';
            games.forEach(game => {
                const li = document.createElement('li');
                li.className = 'game-item';
                li.innerHTML = `
                    <div class="game-title">${game.title}</div>
                    <div class="game-desc">${game.desc}</div>
                    <a class="game-link" href="${game.url}" target="_blank">Play</a>
                `;
                list.appendChild(li);
            });
        }

        // Submit new game to AWS
        document.getElementById('gameForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const title = document.getElementById('title').value;
            const desc = document.getElementById('desc').value;
            const url = document.getElementById('url').value;
            await fetch(API_URL, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ title, desc, url })
            });
            document.getElementById('gameForm').reset();
            loadGames();
        });

        loadGames();
    </script>
</body>
</html>